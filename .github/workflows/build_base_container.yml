---
name: build-base

env:
  REVISION: "0.1"
  BUILDX_NO_DEFAULT_ATTESTATIONS: 1

on:
  push:
    branches:
      - master

jobs:
  build_all_containers:

    strategy:
      matrix:
        container: [base, dev ]
        include:
          - container: base
            platform: linux/arm64/v8,linux/amd64
          - container: dev
            platform: linux/arm64/v8,linux/amd64

    uses: ./.github/workflows/container_build_template.yml

    with:
      container_name: ${{ matrix.container }}
      container_tags: latest,rev${{ env.REVISION }}
      platform: ${{ matrix.platform }}
